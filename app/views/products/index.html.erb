<% content_for :javascripts, javascript_include_tag('products_index') %>

<h1>Lista de produtos</h1>

Filtrar produtos: Por Nome <input id="filter" /> Por Categoria
<%= form_tag products_path, :method => 'get', :style => 'display: inline' %>
  <%= select_tag :category, options_for_select(['Todas'].concat(Product.categories)), :style => "min-width: 100px" %>
  <input type="submit" value="buscar" />
</form>

<table>
  <tr>
    <th>Nome</th>
    <th>Preço</th>
    <th>Quantidade</th>
    <th>Categoria</th>
    <th colspan="3">Ações</th>
  </tr>

<% @products.each do |product| %>
  <tr>
    <td class="product-name"><%= link_to product.name, product %></td>
    <td><%= product.price %></td>
    <td><%= product.quant %></td>
    <td><%= product.category %></td>
    <td><%= link_to 'Dar baixa', baixa_product_path(product) %></td>
    <td><%= link_to 'Editar', edit_product_path(product) %></td>
    <td><%= link_to 'Remover', product, :confirm => 'Cofirma?', :method => :delete %></td>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'Novo produto', new_product_path %>
